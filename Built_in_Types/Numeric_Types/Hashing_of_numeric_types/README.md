            Hashing of numeric types
            Хеширование числовых типов

Для номеров x и y, возможно, разных типов, требуется, чтобы hash(x) == hash(y) всегда
использовался для x == y (дополнительные сведения см. в документации по методу __hash__()).
Для простоты реализации и эффективности для различных числовых типов (включая int, float,
decimal.Decimal и fractions.Fraction) хеш Python для числовых типов основан на единственной
математической функции, которая определена для любого рационального числа и, следовательно,
применяется ко всем экземплярам int и fractions.Fraction и все конечные экземпляры float и
decimal.Decimal. По сути, функция задается редукцией по модулю P для фиксированного 
простого числа P. Значение P доступно для Python как атрибут modulus для sys.hash_info.

Детали реализации CPython: В настоящее время основной используется P = 2**31 - 1 на машинах
с 32-разрядной C-длиной и P = 2**61 - 1 на машинах с 64-разрядной C-длиной.

Далее правила в деталях:
    1. Если x = m / n — неотрицательное рациональное число и n не делится на P, определение 
hash(x) как m * invmod(n, P) % P, где invmod(n, P) даёт обратное n по модулю P.
    2. Если x = m / n — неотрицательное рациональное число и n делится на P (но m не
делится), то n не имеет обратного по модулю P и приведенное выше правило не применяется;
в этом случае определение hash(x) как постоянное значение sys.hash_info.inf.
    3. Если x = m / n — отрицательное рациональное число, определение hash(x) как -hash(-x).
Если полученный хеш — -1, замените его на -2.
    4. Значения sys.hash_info.inf, -sys.hash_info.inf и sys.hash_info.nan используются в 
качестве хеш-значений для положительной бесконечности, отрицательной бесконечности или
NaN (соответственно). (У всех хешируемых NaN одинаковое хеш-значение.)
    5. Для complex чисел z хеш-значения действительной и мнимой частей объединяются путём
вычисления hash(z.real) + sys.hash_info.imag * hash(z.imag), уменьшенного по модулю
2**sys.hash_info.width, так что оно лежит в range(-2**(sys.hash_info.width - 1),
2**(sys.hash_info.width -1)). Опять же, если результат -1, он заменяется на -2.
